# Authorization

授权（Authorization）是指确定用户是否有权限执行某个操作或访问某个资源，用于在认证（Authentication）成功后，为用户分配权限。

## BRAC

RBAC 是指基于角色的权限访问控制（Role-Based Access Control），用户关联角色，角色关联权限：

![](images/2025-03-23-17-45-15.png)

对应于实现上，一般会有 5 张表：

- 用户表
- 角色表
- 权限表
- 用户-角色表
- 角色-权限表

**角色继承**

针对于存在继承关系的常见，比如上级角色会继承下级角色所有权限，可以设置角色继承表，绑定继承关系。

**角色约束**

针对于需要对角色分配进行约束的场景，可以增加角色约束表，或是通过业务逻辑进行限制，常见的约束关系有：

- 静态职责分离：用户不能同时拥有互斥角色
  - 如用户在公司的岗位只能有一个
- 动态职责分离：用户在一次会话中不能同时激活互斥角色
  - 如用户在一次比赛中不能同时担任选手和裁判
- 角色数量限制：限制某个角色的数量
  - 如管理员权限有且只能有一个用户

## ABAC

ABAC 是指基于属性的访问控制（Attribute-Based Access Control），通过多种属性来动态判断某一个操作是否被允许，常见的属性如下所示：

- **对象**：触发操作的用户，包括用户的 ID、角色等
  - 可以是真实用户，也可以是服务账号或是服务
- **资源**：用户要访问的对象
  - 如文件、数据、接口等
- **操作**：用户想要资源的进行的操作
  - 如读取、编辑、复制、删除等
- **环境**：触发操作时的上下文
  - 如时间、位置、设备、网络环境等

在 ABAC 模型中，决策引擎会结合所需属性，动态计算出决策结果，例如外网环境不允许访问数据，18:00 至次日 10：00 间不允许线上变更等。

## ACL

ACL 是指访问控制列表（ACL, Access Control List），直接为资源绑定允许访问的用户/角色列表，通过白名单的方式来管理。

例如在 service mesh 的场景下，微服务间的调用权限统一在注册中心配置。

## OAuth

OAuth 是一种开放授权框架，允许第三方应用在用户授权下，安全地访问其存储在另一服务提供者处的资源，而无需共享用户的凭据（如密码）。

## Ref

- <https://javaguide.cn/system-design/security/basis-of-authority-certification.html>
- <https://javaguide.cn/system-design/security/design-of-authority-system.html>
